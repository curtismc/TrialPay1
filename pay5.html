<!DOCTYPE html>
<html>
<body>

<h1>My First Web Page</h1>
<p>My first paragraph.</p>
<div id = "ppWrapper">
  <p id="PPG_Form"></p>
</div>

  <script type="text/javascript">
    // Get userprefs
    //var prefs = new gadgets.Prefs();
    // Get the array of search terms entered by the user
    //var terms = prefs.getString("business_name");
    var terms = "xxx@paypal.org";
    //document.getElementById("PPG_Form").action = "https://www.paypal.com/cgi-bin/webscr";
    var html = "";
    
    var amount = "0.34";
    var item_name = "BlkMountainScoutTrip";
    var item_description = "BlkMountainScoutTrip";
    var currency_code = "USD";
  
    // If the user has not added any terms yet, display message.
    if (terms.length == 0)
    {
      html += "Edit the userprefs in this gadget to add payment email.";
    }
    else {
      html += "<input type='hidden' name='business' value='" + terms + "' />";
      html += "<input type='hidden' name='cmd' value='_xclick' />";
      html += "<input type='hidden' name='item_name' value='" + item_name + "' />";
      html += "<input type='hidden' name='on0' value='on0_dummy' />";
      html += "<input type='hidden' name='amount' value='" + amount + "' />";
      html += "<input type='hidden' name='currency_code' value='" + currency_code + "' />";
      html += "<p><strong>" + item_name + "</strong></p>"; // Show item description if provided
      if (item_description != "") {
        html += "<p>" + item_description + "</p>";
        }
    // Set the currency character
      var currencyCode = currency_code
      var currencyChar = '';
      switch (currencyCode) {
       case "USD": case "AUD": case "CAD": case "HKD": case "NZD": case "SGD": case "TWD": currencyChar = '$'; break;
       case "GBP": currencyChar = '£'; break;
       case "EUR": currencyChar = '€'; break;
       }
      html += "<p>" + currencyChar + amount + " " + currencyCode + "<br />"; 
      //html += "</div>";
    } // Stuff HTML into form
  
    document.getElementById("PPG_Form").innerHTML = html; // Resize after content & images have loaded
    
  </script>
</body>
</html>
